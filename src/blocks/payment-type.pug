include radiobutton
include credit-card
include order-params
include balance

mixin payment-image-credit-card(parent)

  li(class=`${parent}__icon`)
    svg(width='34' height='24' fill='none' role='presentation' hidden='true')
      rect(width='33' height='23' x='.5' y='.5' rx='3.5' style='fill: var(--color-payment); stroke: var(--color-border-control)')
      path(fill='#172B85' fill-rule='evenodd' d='M11 15.938H8.923L7.366 9.732c-.074-.286-.231-.538-.462-.657A6.563 6.563 0 0 0 5 8.418v-.24h3.346c.462 0 .808.36.866.777l.808 4.476 2.076-5.252h2.02L11 15.938Zm4.27 0h-1.962l1.616-7.76h1.961l-1.615 7.76Zm4.153-5.61c.058-.418.404-.656.808-.656a3.52 3.52 0 0 1 1.904.357l.346-1.67A4.78 4.78 0 0 0 20.693 8c-1.904 0-3.29 1.075-3.29 2.566 0 1.135.982 1.73 1.675 2.09.749.358 1.038.596.98.954 0 .537-.577.776-1.154.776-.692 0-1.385-.179-2.019-.478l-.346 1.672a5.448 5.448 0 0 0 2.134.418c2.135.059 3.462-1.015 3.462-2.627 0-2.029-2.712-2.148-2.712-3.043ZM29 15.938l-1.558-7.76H25.77a.871.871 0 0 0-.809.598l-2.884 7.162h2.02l.403-1.134h2.48l.232 1.134H29Zm-2.942-5.67.576 2.925H25.02l1.04-2.925Z' clip-rule='evenodd')

  li(class=`${parent}__icon`)
    svg(width='34' height='24' fill='none' role='presentation' hidden='true')
      rect(width='33' height='23' x='.5' y='.5' style='fill: var(--color-payment); stroke: var(--color-border-control)' rx='3.5')
      path(fill='#ED0006' fill-rule='evenodd' d='M17 17.447A6.75 6.75 0 0 1 12.672 19C8.987 19 6 16.09 6 12.5S8.987 6 12.672 6A6.75 6.75 0 0 1 17 7.553 6.75 6.75 0 0 1 21.328 6C25.013 6 28 8.91 28 12.5S25.013 19 21.328 19A6.75 6.75 0 0 1 17 17.447Z' clip-rule='evenodd')
      path(fill='#F9A000' fill-rule='evenodd' d='M17 17.447c1.435-1.192 2.344-2.966 2.344-4.947 0-1.981-.91-3.755-2.344-4.947A6.75 6.75 0 0 1 21.328 6C25.013 6 28 8.91 28 12.5S25.013 19 21.328 19A6.75 6.75 0 0 1 17 17.447Z' clip-rule='evenodd')
      path(fill='#FF5E00' fill-rule='evenodd' d='M17 17.447c1.435-1.192 2.345-2.966 2.345-4.947 0-1.981-.91-3.755-2.345-4.947-1.434 1.192-2.344 2.966-2.344 4.947 0 1.981.91 3.755 2.344 4.947Z' clip-rule='evenodd')

mixin payment-image-wallet(parent)

  li(class=`${parent}__icon`)
    svg(width='79' height='18' fill='none' role='presentation' hidden='true')
      path(style='fill: var(--color-accent)' d='M24.308 14.816V3h2.887v4.743h5.979V3h2.906v11.816h-2.906v-4.91h-5.979v4.91h-2.887ZM42.99 15c-1 0-1.87-.178-2.61-.536a4.164 4.164 0 0 1-1.703-1.542c-.395-.66-.592-1.447-.592-2.363 0-.905.197-1.687.592-2.346a4.051 4.051 0 0 1 1.703-1.526c.74-.357 1.61-.536 2.61-.536 1 0 1.87.179 2.61.536.74.358 1.308.866 1.703 1.526.407.659.61 1.44.61 2.346 0 .916-.203 1.704-.61 2.363-.395.66-.963 1.173-1.703 1.542-.74.358-1.61.536-2.61.536Zm0-1.91c.642 0 1.147-.207 1.518-.62.382-.414.573-1.05.573-1.911 0-.86-.19-1.492-.573-1.894-.37-.402-.877-.603-1.518-.603-.642 0-1.154.2-1.537.603-.37.402-.555 1.034-.555 1.894 0 .86.185 1.497.555 1.91.383.414.895.62 1.537.62ZM53.124 15c-1.172 0-2.042-.29-2.61-.871-.567-.592-.851-1.486-.851-2.682V6.32h2.795v5.128c0 .537.117.933.352 1.19.246.257.623.386 1.129.386.555 0 1.012-.173 1.37-.52.37-.357.555-.832.555-1.425v-4.76h2.795v8.498h-2.721V13.19h.259a3.217 3.217 0 0 1-1.222 1.341c-.53.313-1.147.47-1.85.47ZM60.684 14.816v-1.642l5.59-5.565v.604h-5.59V6.319h8.108v1.659l-5.665 5.615-.018-.654h5.868v1.877h-8.293ZM75.317 15c-1.086 0-2.018-.178-2.795-.536-.778-.357-1.37-.866-1.778-1.525-.407-.67-.61-1.458-.61-2.363 0-.883.191-1.654.573-2.313a4.122 4.122 0 0 1 1.63-1.542c.703-.38 1.523-.57 2.461-.57.926 0 1.697.179 2.314.536.63.358 1.098.86 1.407 1.509.32.637.481 1.38.481 2.229v.586h-6.571V9.755h4.535l-.315.235c0-.704-.16-1.235-.481-1.592-.309-.369-.759-.553-1.351-.553-.444 0-.82.1-1.13.301-.296.19-.524.475-.684.855-.148.369-.222.827-.222 1.375v.268c0 .827.222 1.441.666 1.843.457.403 1.11.604 1.962.604.506 0 .981-.056 1.425-.168a4.712 4.712 0 0 0 1.296-.57l.777 1.676a5.515 5.515 0 0 1-1.628.721 7.323 7.323 0 0 1-1.962.251ZM9.409 8.99h-.963V6.745h.963c.421 0 .742.093.963.279.226.179.34.46.34.844 0 .378-.114.66-.34.845-.22.186-.542.279-.963.279Z')
      path(style='fill: var(--color-accent)' fill-rule='evenodd' d='M18.23 9c0 4.971-4.081 9-9.115 9H0V9c0-4.97 4.082-9 9.115-9 5.034 0 9.116 4.03 9.116 9ZM7.213 11.199V12.6h1.254V11.2h1.565v-.71H8.466V9.7h1.118c.48 0 .888-.074 1.225-.22.337-.154.596-.372.778-.654.181-.281.272-.62.272-1.017 0-.397-.09-.743-.272-1.037a1.767 1.767 0 0 0-.788-.691c-.343-.167-.764-.25-1.264-.25H7.212v3.159h-.827v.71h.827v.787h-.827v.71h.827Z' clip-rule='evenodd')

mixin payment-type(obj)

  -
    const name = 'payment-type'
    className = obj.active ? `${name} ${name}--active` : name

  div(class=className)
    div(class=`${name}__headline`)

      p(class=`${name}__description`) #{obj.description}
      ul(class=`${name}__icons`)

        case obj.type
          when 'credit-card'
            +payment-image-credit-card

          when 'wallet'
            +payment-image-wallet

      +radiobutton({name: obj.name, value: obj.value, text: obj.text, checked: obj.active})

    div(class=`${name}__content`)

      case obj.type
        when 'credit-card'
          +credit-card

        when 'wallet'
          +balance([
            {name: 'refill-balance-method', value: 'card', text: 'Банковская карта'},
            {name: 'refill-balance-method', value: 'yandex.money', text: 'Яндекс.Деньги'},
            {name: 'refill-balance-method', value: 'apple-pay', text: 'ApplePay'},
            {name: 'refill-balance-method', value: 'google-pay', text: 'Google Pay'},
          ])

      +order-params({name: `day-count--${obj.value}`, id: `day-count--${obj.value}`, options: [{text: '30'}, {text: '60'}, {text: '90'}]})
